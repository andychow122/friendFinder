<!DOCTYPE html>
<html>
<head>
	<title>SURVEY</title>

  <!-- Latest compiled and minified CSS & JS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

  <!-- Font Awesome Glyphicons -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">

  <!-- Chosen -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>
</head>
<body>
	<div class = "container">
		<div class = "jumbotron">
			<h3>Fill This Out To Find A Friend</h3>
			<hr>
			<br>
			<form><h3>Name: <input type="text" name="" id="name" class="form-control"></h3></form>
			<form><h3>Photo (please provide URL): <input type="text" name="" id="image" class="form-control"></h3></form>
			<hr>

			<!-- questions -->
			<h3><strong>Question 1</strong></h3>
		    <h4>You enjoy watching movies.</h4>
		    <select class="chosen-select" id="q1">
		      <option value="1">1 (Strongly Disagree)</option>
		      <option value="2">2</option>
		      <option value="3">3</option>
		      <option value="4">4</option>
		      <option value="5">5 (Strongly Agree)</option>
		    </select>

		    <h3><strong>Question 2</strong></h3>
		    <h4>You like tacos.</h4>
		    <select class="chosen-select" id="q2">
		      <option value="1">1 (Strongly Disagree)</option>
		      <option value="2">2</option>
		      <option value="3">3</option>
		      <option value="4">4</option>
		      <option value="5">5 (Strongly Agree)</option>
		    </select>


		    <h3><strong>Question 3</strong></h3>
		    <h4>You like anime.</h4>
		    <select class="chosen-select" id="q3">
		      <option value="1">1 (Strongly Disagree)</option>
		      <option value="2">2</option>
		      <option value="3">3</option>
		      <option value="4">4</option>
		      <option value="5">5 (Strongly Agree)</option>
		    </select>


		    <h3><strong>Question 4</strong></h3>
		    <h4>You like going to concerts.</h4>
		    <select class="chosen-select" id="q4">
		      <option value="1">1 (Strongly Disagree)</option>
		      <option value="2">2</option>
		      <option value="3">3</option>
		      <option value="4">4</option>
		      <option value="5">5 (Strongly Agree)</option>
		    </select>


		    <h3><strong>Question 5</strong></h3>
		    <h4>You like tennis.</h4>
		    <select class="chosen-select" id="q5">
		      <option value="1">1 (Strongly Disagree)</option>
		      <option value="2">2</option>
		      <option value="3">3</option>
		      <option value="4">4</option>
		      <option value="5">5 (Strongly Agree)</option>
		    </select>


		    <h3><strong>Question 6</strong></h3>
		    <h4>You like breathing.</h4>
		    <select class="chosen-select" id="q6">
		      <option value="1">1 (Strongly Disagree)</option>
		      <option value="2">2</option>
		      <option value="3">3</option>
		      <option value="4">4</option>
		      <option value="5">5 (Strongly Agree)</option>
		    </select>


		    <h3><strong>Question 7</strong></h3>
		    <h4>You like water.</h4>
		    <select class="chosen-select" id="q7">
		      <option value="1">1 (Strongly Disagree)</option>
		      <option value="2">2</option>
		      <option value="3">3</option>
		      <option value="4">4</option>
		      <option value="5">5 (Strongly Agree)</option>
		    </select>

		    <h3><strong>Question 8</strong></h3>
		    <h4>You are willing to play D&D.</h4>
		    <select class="chosen-select" id="q8">
		      <option value="1">1 (Strongly Disagree)</option>
		      <option value="2">2</option>
		      <option value="3">3</option>
		      <option value="4">4</option>
		      <option value="5">5 (Strongly Agree)</option>
		    </select>

		    <h3><strong>Question 9</strong></h3>
		    <h4>You like headaches.</h4>
		    <select class="chosen-select" id="q9">
		      <option value="1">1 (Strongly Disagree)</option>
		      <option value="2">2</option>
		      <option value="3">3</option>
		      <option value="4">4</option>
		      <option value="5">5 (Strongly Agree)</option>
		    </select>

		    <h3><strong>Question 10</strong></h3>
		    <h4>On occasion, the rug beneath your feet can sometimes start something you have never seen before, no, never even heard of before, and that is the thing that will keep this night dark.</h4>
		    <select class="chosen-select" id="q10">
		      <option value="1">1 (Strongly Disagree)</option>
		      <option value="2">2</option>
		      <option value="3">3</option>
		      <option value="4">4</option>
		      <option value="5">5 (Strongly Agree)</option>
		    </select>

		    <br>
		    <br>

		    <!-- Submit Button -->
		    <button type="submit" class="btn btn-primary btn-sm btn-block" id="submit">
		     Submit</button>

		    <hr>
		    <footer class="footer">
		      <div class="container">
		        <p><h5><a href="/api/friends">API Friends List</a></h5></p>
		      </div>
		    </footer>
		</div>	
	</div>

	<!-- Modal -->
			  <div id="results-modal" class="modal fade" role="dialog">
			    <div class="modal-dialog">

			      <!-- Modal content-->
			      <div class="modal-content">
			        <div class="modal-header">
			          <button type="button" class="close" data-dismiss="modal">&times;</button>
			          <h2 class="modal-title"><strong>Best Match</strong></h2>
			        </div>
			        <div class="modal-body">
			          <h2 id="match-name"></h2>
			          <img id="match-img" src="" alt="">
			        </div>
			        <div class="modal-footer">
			          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			        </div>
			      </div>

			    </div>
			  </div>

	<script type="text/javascript">
		// Capture the form inputs
    $("#submit").on("click", function(event) {
      event.preventDefault();

      // Form validation
      function validateForm() {
        var isValid = true;
        $(".form-control").each(function() {
          if ($(this).val() === "") {
            isValid = false;
          }
        });

        $(".chosen-select").each(function() {

          if ($(this).val() === "") {
            isValid = false;
          }
        });
        return isValid;
      }

      // If all required fields are filled
      if (validateForm()) {
        // Create an object for the user"s data
        var userData = {
          name: $("#name").val().trim(),
          image: $("#image").val().trim(),
          scores: [
            $("#q1").val(),
            $("#q2").val(),
            $("#q3").val(),
            $("#q4").val(),
            $("#q5").val(),
            $("#q6").val(),
            $("#q7").val(),
            $("#q8").val(),
            $("#q9").val(),
            $("#q10").val()
          ]
        };

        // AJAX post the data to the friends API.
        $.post("/api/friends", userData, function(data) {
        	console.log(data);

        $("#name").val("");
        $("#image").val("");
          // Grab the result from the AJAX post so that the best match's name and photo are displayed.
          $("#match-name").text(data.name);
          $("#match-img").attr("src", data.image);

          // Show the modal with the best match
          $("#results-modal").modal("toggle");

        });
      } else {
        alert("Please fill out all fields before submitting!");
      }
    });

	</script>
</body>
</html>